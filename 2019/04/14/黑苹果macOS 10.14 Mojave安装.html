<!DOCTYPE html><html lang="zh-Hans"><head><link rel="stylesheet" href="/css/viewer.min.css"><link rel="stylesheet" href="/css/allinone.min.css"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>黑苹果macOS 10.14 Mojave安装 | ERDUO</title><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="generator" content="hexo"><meta name="author" content="ERDUO"><meta name="description" content><meta name="keywords" content><link rel="shortcut icon" href="/img/favicon.png"><link rel="apple-touch-icon" href="/img/favicon.png"><meta name="theme-color" content="#3c484e"><meta name="msapplication-TileColor" content="#3c484e"><meta property="og:site_name" content="ERDUO"><meta property="og:type" content="article"><meta property="og:title" content="黑苹果macOS 10.14 Mojave安装 | ERDUO"><meta property="og:description" content><meta property="og:url" content="https://www.wangyiting.win/2019/04/14/黑苹果macOS 10.14 Mojave安装.html"><meta property="article:published_time" content="2019-04-14T19:04:00+08:00"><meta property="article:author" content="ERDUO"><meta property="article:published_first" content="ERDUO, /2019/04/14/黑苹果macOS 10.14 Mojave安装.html"></head><body class="post-template"><div class="site-wrapper"><header class="site-header outer" style="z-index:999"><div class="inner"><nav class="site-nav"><div class="site-nav-left"><ul class="nav"><li> <a href="/" title="Home">HOME</a></li><li> <a href="/about" title="ABOUT">ABOUT</a></li><li> <a href="/archives" title="ARCHIVES">ARCHIVES</a></li></ul></div><div class="search-button"> <a href="#search" class="subscribe-button" style="margin:0 10px">Search ...</a></div><div class="site-nav-right"> <a href="#search" class="subscribe-button" style="margin:0 10px">Search ...</a><div class="social-links"> <a class="social-link" title="weibo" href="https://weibo.com/u/5636150684" target="_blank" rel="noopener"><svg viewbox="0 0 1141 1024" xmlns="http://www.w3.org/2000/svg"><path d="M916.48 518.144q27.648 21.504 38.912 51.712t9.216 62.976-14.336 65.536-31.744 59.392q-34.816 48.128-78.848 81.92t-91.136 56.32-94.72 35.328-89.6 18.944-75.264 7.68-51.712 1.536-49.152-2.56-68.096-10.24-78.336-21.504-79.872-36.352-74.24-55.296-59.904-78.848q-16.384-29.696-22.016-63.488t-5.632-86.016q0-22.528 7.68-51.2t27.136-63.488 53.248-75.776 86.016-90.112q51.2-48.128 105.984-85.504t117.248-57.856q28.672-10.24 63.488-11.264t57.344 11.264q10.24 11.264 19.456 23.04t12.288 29.184q3.072 14.336.512 27.648t-5.632 26.624-5.12 25.6 2.048 22.528q17.408 2.048 33.792-1.536t31.744-9.216 31.232-11.776 33.28-9.216q27.648-5.12 54.784-4.608t49.152 7.68 36.352 22.016 17.408 38.4q2.048 14.336-2.048 26.624t-8.704 23.04-7.168 22.016 1.536 23.552q3.072 7.168 14.848 13.312t27.136 12.288 32.256 13.312 29.184 16.384zM658.432 836.608q26.624-16.384 53.76-45.056t44.032-64 18.944-75.776-20.48-81.408q-19.456-33.792-47.616-57.344t-62.976-37.376-74.24-19.968-80.384-6.144q-78.848 0-139.776 16.384t-105.472 43.008-72.192 60.416-38.912 68.608q-11.264 33.792-6.656 67.072t20.992 62.976 42.496 53.248 57.856 37.888q58.368 25.6 119.296 32.256t116.224.512 100.864-21.504 74.24-33.792zM524.288 513.024q20.48 8.192 38.912 18.432t32.768 27.648q10.24 12.288 17.92 30.72t10.752 39.424 1.536 42.496-9.728 38.912q-8.192 18.432-19.968 37.376t-28.672 35.328-40.448 29.184-57.344 18.944q-61.44 11.264-117.76-11.264t-88.064-74.752q-12.288-39.936-13.312-70.656t16.384-66.56q13.312-27.648 40.448-51.712t62.464-38.912 75.264-17.408 78.848 12.8zM361.472 764.928q37.888 3.072 57.856-18.432t21.504-48.128-15.36-47.616-52.736-16.896q-27.648 3.072-43.008 23.552t-17.408 43.52 9.728 42.496 39.424 21.504zM780.288 6.144q74.752 0 139.776 19.968t113.664 57.856 76.288 92.16 27.648 122.88q0 33.792-16.384 50.688t-35.328 17.408-35.328-14.336-16.384-45.568q0-40.96-22.528-77.824t-59.392-64.512-84.48-43.52-96.768-15.872q-31.744 0-47.104-15.36t-14.336-34.304 18.944-34.304 51.712-15.36zM780.288 169.984q95.232 0 144.384 48.64t49.152 146.944q0 30.72-10.24 43.52t-22.528 11.264-22.528-14.848-10.24-35.84q0-60.416-34.816-96.256t-93.184-35.84q-19.456 0-28.672-10.752t-9.216-23.04 9.728-23.04 28.16-10.752z"/></svg></a></div></div></nav></div></header><main id="site-main" class="site-main outer" role="main"><div class="inner"><header class="post-full-header"><section class="post-full-meta"> <time class="post-full-meta-date" datetime="2019-04-14T19:32:04.000Z" itemprop="datePublished">2019-04-14</time> <span class="date-divider">/</span> <a href="/categories/技术向/">技术向</a>&nbsp;&nbsp;</section><h1 class="post-full-title">黑苹果macOS 10.14 Mojave安装</h1></header><article class="post-full no-image"><section class="post-full-content"><div id="lightgallery" class="markdown-body"><h2 id="黑苹果macOS-10-14-Mojave安装"><a href="#黑苹果macOS-10-14-Mojave安装" class="headerlink" title="黑苹果macOS 10.14 Mojave安装"></a>黑苹果macOS 10.14 Mojave安装</h2><p>本文<a href="https://post.smzdm.com/p/az597lqo/" target="_blank" rel="noopener">转载</a>。<br><a href="https://post.smzdm.com/p/ax08lz74/" target="_blank" rel="noopener">VMware安装macOS教程</a></p><p>现在黑苹果越来越简单，工具和驱动都在不断丰富，只要你认真读懂了这篇文章，机器是近三代常规硬件（N卡不行），一般都可以实现黑果，难度很小，全文很多关于Clover的设置选项及功能都是我自己研究、尝试得出的资料，全部看懂可以省下你一两年的折腾。</p><h2 id="黑苹果知识获取"><a href="#黑苹果知识获取" class="headerlink" title="黑苹果知识获取"></a>黑苹果知识获取</h2><ul><li><a href="http://www.tonymacx86.com/" target="_blank" rel="noopener">tonymacx86.com</a>：这是国外的一个黑苹果论坛，上面有几位非常厉害的Clover和相关Kexts维护者，不收费有详细教程，首推论坛！</li><li><a href="http://www.insanelymac.com/" target="_blank" rel="noopener">insanelyMac</a>：国外一个比较早的一个黑苹果论坛，就是在上文中<a href="http://www.osx86project.org/" target="_blank" rel="noopener">osx86社区</a>衍生而来的论坛，人数也不少，但是我用的较少，了解不多，有时候下载的会到这边来。</li><li><a href="http://www.github.com/" target="_blank" rel="noopener">github</a>：Github也是一个非常好的黑果资源搜索器，首先大部分的Kexts开发者都把库放到了这里，其次很多现成现成的EFI也在上边，在这里我发现了最佳黑苹果笔记本——XPS 9360顶配。</li><li><a href="http://bbs.pcbeta.com/" target="_blank" rel="noopener">远景论坛</a>：算是国内最大的黑苹果论坛，最早我接触黑苹果的时候就是在威锋x86和远景，相对而言威锋x86很多资料都太老了，置顶的精华都是好几年前的，对现在根本没有帮助，所以国内论坛首选远景，国内比较知名的黑果开发者也在上面混，但是远景也有很多问题，首先貌似现在是不开放的状态，注册要邀请码，其次远景曾经有一年左右时间存在问题，域名解析或者<a href="https://www.smzdm.com/fenlei/fuwuqi/" target="_blank" rel="noopener">服务器</a>挂了，最最重要的是远景知识不成体系，很多时候大家都是做了个EFI分享出来完事儿，究竟怎么做的，重点在哪里，这个比较少，而且很多资源都是搬运国外的东西，个人建议你如果黑苹果水平还不错，闲来看看别人在玩啥可以，但别想着从这里学会东西。</li><li>诸多个人论坛：这个需要个人收集，国内的有国光、黑果小兵，国外的nickwoodhams等等，先不用急着看，个人建议先从tonymacx86看起。</li></ul><h2 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h2><h3 id="配置环境"><a href="#配置环境" class="headerlink" title="配置环境"></a>配置环境</h3><p>macOS 10.14.3 Mojave</p><h3 id="本机电脑配置"><a href="#本机电脑配置" class="headerlink" title="本机电脑配置"></a>本机电脑配置</h3><p>处理器：intel i7 6400T<br>主板：华擎Z170 OC Formula<br>内存：海盗船DDR4 3000 C15 8G<br>固态：<a href="https://pinpai.smzdm.com/257/" target="_blank" rel="noopener">三星</a>SM961 256G<br>显卡：蓝宝石RX 570超白金</p><h3 id="准备工具"><a href="#准备工具" class="headerlink" title="准备工具"></a>准备工具</h3><ol><li>Clover Configuration</li><li>Clover v4658 or newer/newest Clover of RehabMan Build</li><li>8G+U盘一只</li><li>支持UEFI启动的目标电脑，CPU要求Ivy Bridge及更新的处理器，Sandy Bridge及更老处理器请自行研究</li></ol><h2 id="关于硬件的兼容性问题"><a href="#关于硬件的兼容性问题" class="headerlink" title="关于硬件的兼容性问题"></a>关于硬件的兼容性问题</h2><p>在开始之前我要简单谈谈关于硬件的兼容性问题，<br>一般来说本文只要是Ivy Bridge之后的CPU都没什么问题，如果是SandyBridge处理器，由于Mojave不支持Sandy Bridge平台安装，请在Clover Boot arguments中添加 <code>-no-compat_check</code> 来跳过Mojave的兼容性检查。<br>固态方面：NVME固态包括但不限于建兴、海力士等部分型号和三星PM981，这些固态的主控macOS不认，所以安装根本找不到，SATA固态则没有这个问题。<br>显卡方面：目前只推荐Intel核显和AMD RX460/470/480/560/570/580和Vega 56/64，需要注意2048sp的RX 580是不能用的。</p><h2 id="创建macOS-Install-USB-Drive"><a href="#创建macOS-Install-USB-Drive" class="headerlink" title="创建macOS Install USB Drive"></a>创建macOS Install USB Drive</h2><p>从这篇文章起，我们就真正的开始进入安装黑苹果的阶段，现在我们已经知道，一台Intel处理器的电脑安装黑苹果，实际上是由BIOS Legacy或者UEFI引导第三方EFI启动器，例如Clover，来实现启动macOS。目前最主流的方案是UEFI+Clover创建、安装、引导macOS Mojave，所以我们首先需要创建macOS Mojave的安装U盘。</p><p>很多人不明白为什么我要在第一篇文章中使用U盘来安装虚拟机macOS Mojave，而不是使用vmdk硬盘镜像。事实上这种安装方法能节省我们创建U盘的时间，不需要再下载第二次macOS安装镜像文件。对于我们来说我们直接将U盘连接到虚拟机macOS中，然后在U盘的EFI分区中安装Clover即可。</p><p>但是为了让手头有Macbook Pro等设备而没进行第一篇安装虚拟机操作的人也能创建黑苹果安装U盘，我将会讲解一次从空白的U盘到创建U盘镜像的完整过程，<strong>已经按照第一篇文章使用U盘安装虚拟机的可以跳过这个步骤。进入下一段！</strong></p><p>首先，我们下载最新版本的Mojave，这可以从App Store中下载</p><p><img alt="App Store下载Mojave" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30c7642f2d.png" data-src="https://i.loli.net/2019/04/14/5cb30c7642f2d.png">App Store下载Mojave</p><p><img alt="勾选获取" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30c72af663.png" data-src="https://i.loli.net/2019/04/14/5cb30c72af663.png">勾选获取</p><p>弹出偏好中的系统更新，然而不知道为什么下载失败，不清楚是否由于虚拟机环境造成，实体机应该不会有这样的现象。</p><p><img alt="失败" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30c6d7bb6f.png" data-src="https://i.loli.net/2019/04/14/5cb30c6d7bb6f.png">失败</p><p>故我只能剑走偏锋，经过google搜索how to reinstall mojave，我发现了一个小软件名为macOS Mojave Patcher。通过Patcher内置的Tools可以下载Mojave。</p><p><img alt="macOS Mojave Patcher" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30c7486ec3.png" data-src="https://i.loli.net/2019/04/14/5cb30c7486ec3.png">macOS Mojave Patcher</p><p>确认后即可开始下载。</p><p><strong><img alt="Download macOS" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30c6f701a6.png" data-src="https://i.loli.net/2019/04/14/5cb30c6f701a6.png">Download macOS</strong></p><p>总体来说下载速度并不慢</p><p><img alt="下载过程" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30c6e65972.png" data-src="https://i.loli.net/2019/04/14/5cb30c6e65972.png">下载过程</p><p>下载完毕后在/Application目录下就可以找到Install macOS Mojave的安装器。我们既可以使用macOS Mojave Patcher创建U盘，也可以用命令行创建，我两种方法都演示一遍：</p><p>首先是macOS Mojave Patcher，点击左边的icon，跳出选择安装app，我们选择/Application/Install macOS Mojave，点击打开。</p><p><img alt="在软件中可以直接烧录" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30c7061d71.png" data-src="https://i.loli.net/2019/04/14/5cb30c7061d71.png">在软件中可以直接烧录</p><p><strong><img alt="选择Mojave安装文件" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30c716f29a.png" data-src="https://i.loli.net/2019/04/14/5cb30c716f29a.png">选择Mojave安装文件</strong></p><p>接着再点击右侧的Target Disk，选择U盘为目标磁盘，接下来点击Start Operation就开始烧录了。</p><p><img alt="安装到对应磁盘" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30e2ee988f.png" data-src="https://i.loli.net/2019/04/14/5cb30e2ee988f.png">安装到对应磁盘</p><p>第二种方法是使用Terminal创建，需要对命令行有一定的熟悉。</p><p>首先将U盘插入虚拟机或者MacBook Pro，打开macOS自带的Terminal终端，输入<code>diskutil list</code> ，输出如下图所示。</p><p><img alt="查看磁盘分区" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30e2a53c77.png" data-src="https://i.loli.net/2019/04/14/5cb30e2a53c77.png">查看磁盘分区</p><p>从图中可以看出，我的电脑有3个磁盘，disk0是真正的物理磁盘，分为两个分区，disk0s1是EFI引导分区，disk0s2则是APFS文件系统的容器，这个容器虚拟化成disk1，再在其中分为4个分区，分别为安装系统的Macintosh HD、不知道干什么用的Preboot、恢复使用的Recovery分区和最后描述APFS文件虚拟化的VM分区。而disk3则是我的U盘，所以现在我们已经知道了disk3是我们要操作的对象。</p><p>diskutil partitionDisk /dev/disk3 1 GPT HFS+J “install_osx” R</p><p>diskutil是磁盘管理命令，partitionDisk表示对目标磁盘进行格式化，/dev/disk3则是U盘对应的硬件名（因为在Unix下任何硬件都对应着一个文件），1表示除EFI分区外只留下一个分区，GPT意味着使用GUID分区图，HFS+J使用HFS分区文件系统，install_osx则是格式化后的分区名。输出结果如图所示：我们已经创建了一个200M+的EFI分区（苹果引导EFI区必须要大于200M）和一个15.7GB的分区。</p><p><img alt="划分U盘分区" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30e2c1d7c6.png" data-src="https://i.loli.net/2019/04/14/5cb30e2c1d7c6.png">划分U盘分区</p><p>接下来我们要使用命令创建安装U盘。输入以下命令：</p><p>sudo /Applications/Install macOS Mojave.app/Contents/Resources/createinstallmedia –volume /Volumes/install_osx –nointeraction</p><p>sudo表示调用超级管理员权限，意味着等会儿执行命令需要输入账户密码，后面跟的/Applica-&gt;media则表示使用这个路径的命令，—volume后面的表示目标分区为U盘。执行命令后将会格式化U盘并COPY系统安装文件。</p><p><img alt="烧录完成" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30e29821f6.png" data-src="https://i.loli.net/2019/04/14/5cb30e29821f6.png">烧录完成</p><h1 id="Create-Clover-EFI-and-Configuration"><a href="#Create-Clover-EFI-and-Configuration" class="headerlink" title="Create Clover EFI and Configuration"></a>Create Clover EFI and Configuration</h1><p>接下来我们需要对U盘的EFI分区安装Clover，这里既可以使用sourceforge上托管的Clover master branch，也可以使用其他人fork的Clover分支，我比较习惯使用RehabMan在Bitbucket上fork的CloverRM版，诸位可自行下载。打开Clover，点击继续，确认许可协议</p><p><img alt="Clover-1" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30e2b48f5f.png" data-src="https://i.loli.net/2019/04/14/5cb30e2b48f5f.png">Clover-1</p><p><img alt="Clover-2" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30e2e027ea.png" data-src="https://i.loli.net/2019/04/14/5cb30e2e027ea.png">Clover-2</p><p>接下来我们选择更改安装位置，选择我们的U盘。</p><p><img alt="修改安装位置" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30e27da14d.png" data-src="https://i.loli.net/2019/04/14/5cb30e27da14d.png">修改安装位置</p><p><img alt="定位到U盘" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30e2d116ee.png" data-src="https://i.loli.net/2019/04/14/5cb30e2d116ee.png">定位到U盘</p><p>点击继续重新回到上级界面，这次我们选择自定。</p><p><img alt="选择自定安装" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30e28abc5b.png" data-src="https://i.loli.net/2019/04/14/5cb30e28abc5b.png">选择自定安装</p><p>自定的内容非常多，我们需要详细讲解一下</p><p><img alt="Clover自定安装" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30f250f25c.png" data-src="https://i.loli.net/2019/04/14/5cb30f250f25c.png">Clover自定安装</p><p>由于我们使用UEFI启动而非BIOS Legacy，所以勾选仅安装UEFI开启版本，与此同时安装Clover到EFI系统区也会自动勾选，Bootloader和CloverEFI则无法选中（因为这两项是跟BIOS Legacy启动有关，如果想BIOS引导安装请自行研究），勾选开机主题，这样我们的启动界面能设置各式各样的主题更换。勾选UEFI开机版本后，BIOS Drivers和FileVault 2 BIOS Drivers也会自动隐藏。</p><p><img alt="配置主题" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30f260172a.png" data-src="https://i.loli.net/2019/04/14/5cb30f260172a.png">配置主题</p><p>接下来就是最最重要的UEFI Drivers配置，点击左侧的三角箭头展开如下图所示：</p><p><img alt="配置UEFI Drivers" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30f26df334.png" data-src="https://i.loli.net/2019/04/14/5cb30f26df334.png">配置UEFI Drivers</p><ul><li>ApfsDriverLoader-64 &amp; AppleImageLoader-64这两个是用来替代macOS原生APFS.efi，在High Sierra之后的版本，苹果公司将磁盘分区从HFS更换为了APFS，早期Clover不带这两个efi，所以需要使用macOS中提取的apfs.efi来引导apfs磁盘，但是原生apfs会出现代码，为了好看和方便，现在的Clover已经自带了apfs引导efi了。这两个驱动必须勾选。</li><li>AptioMemoryFix-64是用于处理引导初始阶段的UEFI内存分配修正efi，同类efi还有OsxAptioFix3Drv-64.efi/OsxAptioFix2Drv-64.efi/OsxAptioFixDrv-64.efi/OsxLowMemFixDrv-64.efi，千万千万注意，一个Clover引导EFI中只能有一个MemFixDrv，不然会出现错误，如果说你使用AptioMemoryFix在初始分配内存时就出错，那么可以尝试考虑更换为后面几个（也要一个个替换，千万别一堆安装上去）。这个驱动也必须要勾选。</li><li>DataHubDxe-64是macOS要求强制启动的协议，虽然大部分情况下都是启动的，但是有备无患，而且这个efi不会引起崩溃，大家都勾选即可。</li><li>FSInject-64必须勾选，正常情况下，我们需要对黑苹果注入kernal kext，这个是必备efi。</li><li>SMCHelper-64是和FakeSMC联动的efi，smc是苹果为了限制非Apple设备安装macOS的东西，所以这个必须勾选。</li><li>CsmVideoDxe-64是在CSM开启情况下提供更多的分辨率的efi，由于我们是纯粹的UEFI启动，所以不装（这玩意儿装了可能会出错）。</li><li>EmuVariableUefi-64是对某些UEFI启动无法调用NVRAM的机器提供的NVRAM模拟，部分Skylake架构的机器会需要这个efi（真的是很小一部分，我装过Skylake三台机器，都没有用过这个efi），我建议只有在出错告知你需要这玩意儿的时候再调整，虽然这玩意儿装了好像也不会导致崩溃，但是我不确认本来NVRAM正常的机器装上这个会不会就不调用硬件NVRAM了。所以我这里也不勾选。</li><li>PartitionDxe-64主要用于处理macOS的Hybrid磁盘分区表，这个是Bootcamp中用到的，我们没啥用，不用勾选。</li></ul><p>剩下的都没什么好讲的，基本用不到，很多都是历史遗留，原来有用，现在已经被macOS原生支持了，不需要再添加。点击安装：需要输入密码。</p><p><img alt="安装Clover" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30f27cf55f.png" data-src="https://i.loli.net/2019/04/14/5cb30f27cf55f.png">安装Clover</p><p>安装完毕。</p><p><img alt="安装完毕" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30f242f391.png" data-src="https://i.loli.net/2019/04/14/5cb30f242f391.png">安装完毕</p><p>与此同时，在桌面上我们也可以看到EFI分区已经被挂载。</p><p><img alt="EFI分区出现" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30f29cb7e0.png" data-src="https://i.loli.net/2019/04/14/5cb30f29cb7e0.png">EFI分区出现</p><p>Clover文件结构如下图所示</p><p><img alt="Clover EFI文件结构" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30f28c2dac.png" data-src="https://i.loli.net/2019/04/14/5cb30f28c2dac.png">Clover EFI文件结构</p><p>BOOT<a href="https://www.smzdm.com/fenlei/wenjianjia/" target="_blank" rel="noopener">文件夹</a>下有BOOTX64.efi，UEFI首先引导这个文件，然后BOOTX64.efi再进一步引导CLOVER目录下的CLOVERX64.efi，进入CLOVER引导流程，接下来我们一一讲解各个文件夹作用：</p><ul><li>ACPI文件夹主要用于保存CLOVER引导时按F4提取的电脑ACPI表，保存在origin子目录下，我们进一步修改需要替换的DSDT和SSDT则需要保存在ACPI/patched目录下，目前我们用不到</li><li>config.plist则是Clover引导最最重要的配置文件，默认安装Clover是空文件，我们需要尽量找已经配置好、配置相近的成品config.plist进行替换。</li><li>doc文件夹下都是一些描述介绍Clover的用途和用法文件，可以整个删除</li><li>drivers64文件夹下主要是BIOS Legacy引导时需要加载的driver，我们使用UEFI引导可以整个删除</li><li>drivers64UEFI文件夹是UEFI引导时需要加载的driver，我们在接下来还需要修改。</li><li>kexts文件夹下保存着需要注入macOS中的kernel kexts，非常重要，里面有10.6-10.14的子文件夹和other子文件夹，一般情况下，我们会删除10.6-10.14子文件夹 ，只保留other文件夹，所有的kext保存在other文件夹下。</li><li>misc文件夹是保存preboot文件和vbios文件，一般情况下用不到，可以整个删掉。</li><li>OEM文件夹也无用，可以整个删掉</li><li>themes保存着Clover主题文件，例如我们现在就保存了BGM和Metal主题</li><li>tools保存着efi shell，不做修改。</li></ul><p>总结一下，这里面目前最重要的就是config.plist/kexts/drivers64UEFI这三位，接下来我们就需要找到一个相近的config.plist文件来替换现有的config.plist，因为自己研究config.plist的写法太繁琐太困难，我们只要找到类似的config.plist进行小小的修改更加方便。这就是为什么很多人推荐如果打算进行黑苹果，最好能找已经有人配置成功的类似配置进行组装DIY，因为别人成功表示你也大概率可以，而且它的config.plist你可以借鉴甚至直接拿来用，省心省事儿，像我更愿意有一位大牛在前面帮我做好引导，我只需要简单拿来用就好。</p><p>RehabMan的github上有OS-X-Clover-Laptop-Config库，诸位可以自行寻找相近配置进行替换，本机采用Intel io7 6400T处理器，内置HD 530核显，应该是比较容易驱动的，但是这次我用了一张RX570，故没核显什么事情，所以我选择了同为14nm架构的Skylake中选择config，最终选择了config_HD515_520_530_540.plist。复制到Clover文件夹中重命名为config.plist替换原有文件。</p><p>接下来我们需要安装Clover Configuration来对EFI中的Clover进一步配置。Clover Configuration界面如图所示：</p><p><img alt="Clover Configuration" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30f2dc5cd5.png" data-src="https://i.loli.net/2019/04/14/5cb30f2dc5cd5.png">Clover Configuration</p><p>打开EFI分区中的config.plist，如图所示</p><p><img alt="ACPI" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30f2c698d6.png" data-src="https://i.loli.net/2019/04/14/5cb30f2c698d6.png">ACPI</p><p>在左侧标签栏中选择Boot，Boot Argument保留-v dart=0和debug=0x100，Timeout改为-1，其他随意，Timeout是关于Clover引导时的等待时间，-1表示一直等待除非你选择某个启动。</p><p><img alt="Boot" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30f2b10aff.png" data-src="https://i.loli.net/2019/04/14/5cb30f2b10aff.png">Boot</p><p>这里也要详细说明下Boot Argument，你可以理解为启动参数，不同的启动参数用于开启不同的功能，有些kext也需要启动参数进行配置，右键可以添加。</p><p><img alt="Argument" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30fe84c61f.png" data-src="https://i.loli.net/2019/04/14/5cb30fe84c61f.png">Argument</p><ul><li>-v是调试模式，在加上这个参数后macOS启动和关机将不会是苹果LOGO+进度条，取而代之则是引导时各种信息提示和BUG提示。在安装的时候推荐勾选。</li><li>-s是单用户模式，我也没用过</li><li>-x是安全模式，没用过</li><li>npci=0x2000/npci=0x3000是针对X99用户需要添加的参数，不然会卡PCI Configuration Begin</li><li>-xcpm是使用XNU CPU PowerManagement</li><li>cpus=1是强制只使用1个核心启动，避免由于CPU核心过多导致的引导错误</li><li>dart=0是禁用vt-d，macOS不支持vt-d，所以需要在BIOS中关闭，但是本人玩esxi喜欢开着，所以就需要添加dart=0</li><li>debug=0x100是在遇到panic时不要自动重启，这样我们能在调试状态下看到卡在哪个地方</li><li>nvda_drv=1是加载Nvidia Web Driver，N卡用户在安装完Web Driver后需要启用，但是目前Web Driver卡在macOS 10.13.6，Mojave没有Web Driver Release，很有可能会一直停滞，因为Apple希望发展自己的Metal替代CUDA，所以目前安装黑苹果推荐要么核显要么RX4xx/5xx/Vega xx（RX 580 2048sp不可用）</li><li>nv_disable=1在没有安装Web Driver之前，所有N卡用户必须要加上这条禁用macOS自带的Nvidia驱动。</li><li>kext-dev-mode=1是早期遗留，在Sierra之前需要这条命令起到sudo的作用。</li><li>rootless=0同上，也是历史遗留</li><li>下面的Lilu/AppleALC/CPUFriend等等都是需要配合相应的kext才能起作用，建议去github自行查询相应的用处。</li></ul><p>在CPU选项卡中，如果是Skylake以上的处理器可以开启HWPEnable，勾选圈圈中的两个选项即可启动。</p><p><img alt="CPU" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30ff0bb872.png" data-src="https://i.loli.net/2019/04/14/5cb30ff0bb872.png">CPU</p><p>Disable Drivers选项卡中的设置则和之前的Driver64UEFI息息相关，如果在这里添加了某个Drivers，那么即使在前面那个文件夹中有efi，也不会被引导，RehabMan的配置文件中默认关闭VBoxHfs，因为太老了，性能较差，我们在接下来会下载HFSPlus-64替代。</p><p><img alt="Disable Drivers" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30fe959d91.png" data-src="https://i.loli.net/2019/04/14/5cb30fe959d91.png">Disable Drivers</p><p>GUI选项卡一般不需要做大改动，如果要引导Linux，请勾选Scan下的Linux，在右侧可以配置主题，例如我们这里选择BGM作为主题，最右边还可以隐藏Volume，一般情况下我们隐藏Preboot和Recovery。</p><p><img alt="GUI" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30fece5a34.png" data-src="https://i.loli.net/2019/04/14/5cb30fece5a34.png">GUI</p><p>在Graphics中我们可以对显卡进行ID注入，Intel核显用户请输入正确ig-platform-id并勾选inject Intel，具体ig-platform-id可以参考黑果小兵整理的Intel核显platform-id，由于我们是AMD RX 570 4G，除了要在kext包中添加WhateverGreen之外，还需要勾选RedeonDeInit，具体原因参照Tonymacx86-Post Install-Graphics-Radeon Compatibilty Guide As Follow:</p><blockquote><p>Many modern AMD GPUs are incorrectly initialized during boot phase, which will can lead to serious issues in OS X (e.g. boot to black screen or crash after sleep/wake). This was first solved by the WhateverGreen Lilu plugin. Extensive research has been done by Mieze, resulting in a DSDT patch. This knowledge has been incorporated into Clover (starting with rev. 4296) and can be enabled from the config.plist</p></blockquote><p>Inject ATI和Inject NVidia一般都不用勾选，这是对老显卡的支持。</p><p><img alt="Graphics" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30fea86c87.png" data-src="https://i.loli.net/2019/04/14/5cb30fea86c87.png">Graphics</p><p>Kernel and Kext Patches则是一些高手们定制出来的补丁，通过这种方式进行热修复，这里要说下比较关键的MSR 0xE2问题，在真实的Mac电脑上，OSX XCPM PowerManagement需要对BIOS中MSR 0xE2这块区域进行读写，然而，很多主板把这个区域锁了起来，不允许读取修改，ASUS主板印象中是全线都锁，所以这就导致了Kernel Panic，根本无法引导，以前很多人说技嘉的主板容易黑，那就是因为技嘉几乎全线都是Unlock的，所以我们经常会说到BIOS中的CFG Lock需要Disable。但很多主板BIOS中根本没有这个选项，</p><p>第一种方法是CodeRush开发的UEFIPatch可以让我们解锁MSR 0xE2选项，但是相对比较麻烦<br>第二种方法我们可以在KernelToPatch中添加由Pike R.Alpha的“xcpm_core_scope_msrs”补丁，并且勾选kernelPM，补丁如下：</p><p>Find: 31 d2 e8 91 fc ff ff Replace: 31 d2 90 90 90 90 90</p><p><img alt="Kernel and Kexts to Patch" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb3113c8a3e2.png" data-src="https://i.loli.net/2019/04/14/5cb3113c8a3e2.png">Kernel and Kexts to Patch</p><p>SMBIOS代表你这个机器的型号，点击圈圈内的按钮可以选择不同的机型，尽量选择同代CPU机型仿冒，这里我选择同为Skylake架构的iMac 17,1。</p><p><img alt="SMBIOS" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30fee2d09d.png" data-src="https://i.loli.net/2019/04/14/5cb30fee2d09d.png">SMBIOS</p><p>回到Rt Variables，我们点击Generate创建ROM</p><p><img alt="RT Variable" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30fef6f4a2.png" data-src="https://i.loli.net/2019/04/14/5cb30fef6f4a2.png">RT Variable</p><p>最后在System Parameters中我们Generate UUID，在inject Kexts中选择Detect，这里Detect表示如果在/System/Library/Extensions或者/Library/Extensions文件夹中有同样的kext，clover就不会注入，如果没有，就会注入，个人觉得最好，而Yes表示无论如何都注入，No表示不注入kext。</p><p><img alt="System Parameters" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30ff33f9cf.png" data-src="https://i.loli.net/2019/04/14/5cb30ff33f9cf.png">System Parameters</p><p>Clover Configuration的左下侧则是一些小工具，例如Mount EFI可以非常方便的挂载系统和U盘的EFI分区</p><p><img alt="Mount EFI" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30ff1e6a55.png" data-src="https://i.loli.net/2019/04/14/5cb30ff1e6a55.png">Mount EFI</p><p>Install Drivers则可以非常方便下载EFI Drivers，我们这里就需要使用这个工具下载HFSPlus-64.efi，否则在Clover中我们根本看不到Install Mojave。</p><p><img alt="Install Drivers" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb30febb7b84.png" data-src="https://i.loli.net/2019/04/14/5cb30febb7b84.png">Install Drivers</p><p>kexts Installer中我们可以非常方便的下载一些必要的Kexts，需要注意，OS Version要选择Other，这样所有的kext都会被下载到Kexts/Other文件夹下。我们这里需要Lilu/WhateverGreen/FakeSMC/USBInjectAll：</p><p><img alt="Kexts Installer" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb311ee6c7a8.png" data-src="https://i.loli.net/2019/04/14/5cb311ee6c7a8.png">Kexts Installer</p><p>简单的说一下这些Kext各自的作用，为了大家能理解作用，请详细阅读下段文字，挑选自己需要的kext！</p><ul><li>Lilu是一个由acidanthera写的辅助性Kext，它本身没有什么作用，但是它能帮助其它kext注入，并且提供了一套独特的API，所以很多Kext需要它的存在才能发挥作用，依赖它的Kext有：AirportBrcmFixup/AppleALC/ATH9KFixup/BT4LEContiunityFixup/CPUFriend/DiskArbitrationFixup/HibernationFixup/NightShiftUnlocker/NoTouchID/NoVPAJpeg/VirtualSMC/WahteverGreen，所以这个驱动几乎是必备的。</li><li>VirtualSMC是用来取代FakeSMC的新一代kext，也是由acidanthera写的，但是目前BUG较多，我基本是不用的</li><li>WhateverGreen可以说是GPU kext的集大成制作，集合了CoreDisplayFixup/BrcmWLFixup/EnableLidWake/AppleBlacklightFixup/AzulPatcher4600/IntelGraphicsDVMTFixup/IntelGraphicsFixup/NvidiaGraphicsFixup/Shiki等kext，基本能解决除N卡Web Driver没有外所有的显卡问题。也是由acidanthera编写，必备驱动。如果你使用的是4K屏幕，请在Boot Argument中加入-cdfon。</li><li>AppleALC同样由acidanthera编写，主要是为了对那些不支持的声卡进行修复，让其正常工作，之后的文章我们会对其深入讲解。</li><li>AirportBrcmFixup则是针对无线网卡的驱动和Airport功能的修复。</li><li>NoVPAJpeg是针对macOS 10.14下Preview和QuickLook存在问题而添加的。</li><li>CPUFriend是开启动态CPU电源管理时需要用到</li><li>FakeSMC是最最最最最最最重要的Kext，没有之一，RehabMan出品。因为macOS的安装需要SMC，这个kext的作用就是模拟SMC，让macOS安装可以正常进行，这个必须要有！此外FakeSMC还有一系列插件 （FakeSMC_ACPISensors.kext, FakeSMC_CPUSensors.kext, FakeSMC_LPCSensors.kext, FakeSMC_GPUSensors.kext），如果你要使用HWMonitor监测CPU数据，就需要安装这些插件。</li><li>USBInjectAll是针对macOS有USB Port数量限制而设计出来的，RehabMan出品。在macOS10.11之后，USB特别多的主板，例如Z系列X系列要么破解USB Port Limit要么针对本机定制USBInjectAll，之后的文章我们会深入讲解。</li><li>VoodooPS2Controlller：如果你是笔记本，请加入这个驱动，这个主要是为了提供PS2支持，因为<a href="https://www.smzdm.com/fenlei/taishiji/" target="_blank" rel="noopener">台式机</a>很少用到PS2，所以可以不加，但是笔记本的键盘、<a href="https://www.smzdm.com/fenlei/chukongban/" target="_blank" rel="noopener">触控板</a>大多数都是使用PS2端口，所以一定要加。</li><li>NullCPUPowerManagement：如果你卡在了ApplePowerManagement说明CPU原生电源管理失败，就需要这个驱动来关闭CPU原生电源管理。</li><li>ACPIBatteryManagement：笔记本电池管理需要用到，但是安装的时候不加没关系，之后的文章详细讲解笔记本电池ACPI修复的时候会讲解。</li><li>FakePCIID：仿冒PCI设备的一些Kext依赖它，属于辅助性kext。驱动无线网卡的时候要用到，RehabMan出品。</li><li>GenericUSBXHCI：其实我本不想描述这个Kext，因为这个Kext是针对Sandy Bridge架构及更早的处理器不支持USB3.0，所以主板自作聪明添加了第三方USB3，这时候就需要这个驱动来实现正常工作，对我们没啥用处。</li><li>RealtekRTL8111/RealtekRTL8100/AppleIntelE1000e/IntelMausiEthernet/AtherosE2200Ethernet这些则是有线网卡驱动，可以根据自己的网卡型号挑选，无线网卡和蓝牙部分我们下次详细展开讲。</li></ul><p>这块主板是Intel i219-V的网卡，所以还需要额外安装IntelMausiEthernet。这些都可以在tonymacx86上下载到。最终Kext文件夹如图所示，只要能安装就好，完善之后再做。</p><p><img alt="驱动目录" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb311ed37f85.png" data-src="https://i.loli.net/2019/04/14/5cb311ed37f85.png">驱动目录</p><p>Intel核显用户特别注意，Broadwell和Skylake处理器在macOS下都要求DVMT-Prealloc最起码在64M及以上，但是很多BIOS都不支持更改，所以config中一般默认添加了一个minStolenSize的patch，将macOS的要求从64M改为32M，它在config.plist/Devices/Properties/PciRoot(0)/Pci(0x02,0)中存在。</p><p><img alt="image.png" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb311efa7dbe.png" data-src="https://i.loli.net/2019/04/14/5cb311efa7dbe.png">image.png</p><h2 id="设置BIOS"><a href="#设置BIOS" class="headerlink" title="设置BIOS"></a>设置BIOS</h2><ul><li><p>关闭vt-d：但是由于本人讨厌关闭vt-d，所以在Boot Argument中已经添加dart=0，可以不关闭。</p></li><li><p>关闭secure boot：微软整出来的幺蛾子，要求启动的系统有签证才算secure，妥妥的要关掉。</p></li><li><p>关闭Legacy Boot/CSM：为了纯正的UEFI引导，我们要关闭避免干扰，如果你Windows不是UEFI启动，那也可以不关，但是请仔细选择引导（如果UEFI启动进入Clover卡住，请开启CSM，如果单屏正常，双屏启动黑屏，请开启CSM）。</p></li><li><p>关闭fast boot：有些主板Fast Boot会直接忽略USB引导。</p></li><li><p>SATA Mode设置为AHCI，不要IDE，不要RAID</p></li><li><p>关闭TPM模块</p></li><li><p>关闭CFG-Lock，我真想不明白为什么主板厂喜欢Lock，默认Lock就算了，还不给改。</p></li><li><p>关闭IO Serial Port：这个就是所谓的COM口，一般正常人也用不到，有些搞硬件开发和单片机的用的比较多</p></li><li><p>开启XHCI Handoff EHCI Handoff</p><h1 id="启动macOS-Mojave安装U盘"><a href="#启动macOS-Mojave安装U盘" class="headerlink" title="启动macOS Mojave安装U盘"></a>启动macOS Mojave安装U盘</h1><p>开机按F11（因主板而异）进入启动选择菜单，选择Mojave安装U盘，前面都已经配置好了，这里直接回车，等待即可。虽然是这台电脑我根本没装过，但是根据我对常规平台的了解和前面详细的设置，个人觉得一次就能过。</p></li></ul><p>果不其然，正常进入安装界面：</p><p><img alt="第一次启动1" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb311f3cb5c7.jpeg" data-src="https://i.loli.net/2019/04/14/5cb311f3cb5c7.jpeg">第一次启动1</p><p>接下来首先选择语言为简体中文，下一步。</p><p><img alt="第一次启动2" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb3156bde647.jpeg" data-src="https://i.loli.net/2019/04/14/5cb3156bde647.jpeg">第一次启动2</p><p>在macOS实用工具这里首先选择磁盘工具，进行进一步的配置。</p><p><img alt="第一次启动3" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb3156730d4e.jpeg" data-src="https://i.loli.net/2019/04/14/5cb3156730d4e.jpeg">第一次启动3</p><p>在磁盘工具里我们可以发现除了Windows下的两块SATA硬盘被标注为disk1s1（<a href="https://www.smzdm.com/fenlei/putongyingpan/" target="_blank" rel="noopener">机械硬盘</a>，disk1表示第一块硬盘，因为在插主板SATA口的时候更靠前，s1表示第二个分区，第一个分区为GPT格式默认有的EFI分区）和disk2s4（Windows所在磁盘分区）之外，还有一个SAMSUNG开头的大小为256G的PCI-E磁盘，这就是我们要安装的地方，选择最上方抹掉按钮。</p><p><img alt="第一次启动4" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb31570d062a.jpeg" data-src="https://i.loli.net/2019/04/14/5cb31570d062a.jpeg">第一次启动4</p><p>名称为Macintosh HD，macOS默认的名称，格式为APFS+GUID分区表。</p><p><img alt="第一次启动5" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb3156f2635b.jpeg" data-src="https://i.loli.net/2019/04/14/5cb3156f2635b.jpeg">第一次启动5</p><p>格式化成功后关闭磁盘工具</p><p><img alt="第一次启动6" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb31572b0820.jpeg" data-src="https://i.loli.net/2019/04/14/5cb31572b0820.jpeg">第一次启动6</p><p>选择安装macOS。</p><p><img alt="第一次启动7" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb3156a2f28a.jpeg" data-src="https://i.loli.net/2019/04/14/5cb3156a2f28a.jpeg">第一次启动7</p><p>选择继续</p><p><img alt="第一次启动8" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb31568bb5a8.jpeg" data-src="https://i.loli.net/2019/04/14/5cb31568bb5a8.jpeg">第一次启动8</p><p>协议继续下一步</p><p><img alt="第一次启动9" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb3156d771dd.jpeg" data-src="https://i.loli.net/2019/04/14/5cb3156d771dd.jpeg">第一次启动9</p><p>目标磁盘选择刚才格式化好的Macintosh HD分区</p><p><img alt="第一次启动10" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb3161a3066b.jpeg" data-src="https://i.loli.net/2019/04/14/5cb3161a3066b.jpeg">第一次启动10</p><p>接下来进入漫长的等待</p><p><img alt="第一次启动11" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb31616b88e8.jpeg" data-src="https://i.loli.net/2019/04/14/5cb31616b88e8.jpeg">第一次启动11</p><p>结束后会重启电脑，仍然按F11选择U盘EFI启动（因为这个时候我们只有U盘里有Clover Bootloader可以引导macOS），选择右下角是磁盘形状的macOS图标，并且名称应该为Install from Macintosh HD。这次引导会相对快一些，引导结束一会儿就会重启</p><p><img alt="第二次启动" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb3160f14ebb.jpeg" data-src="https://i.loli.net/2019/04/14/5cb3160f14ebb.jpeg">第二次启动</p><p>第二次重启后，就会开始将复制到Macintosh HD磁盘的系统文件解压展开并进行一系列的自动化设置。结束后仍然是重启。</p><p><img alt="第三次启动" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb316185a547.jpeg" data-src="https://i.loli.net/2019/04/14/5cb316185a547.jpeg">第三次启动</p><p>这次重启后进入U盘引导，我们可以发现磁盘变成了四个，第一个就是Windows，第二个是U盘的macOS安装环境，第三个是macOS系统，第四个则是Recovery分区。我们选择第三个回车：</p><p>等待一段时间后我们就进入了macOS的设置界面，区域选择中国</p><p><img alt="第四次启动1" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb316109725a.jpeg" data-src="https://i.loli.net/2019/04/14/5cb316109725a.jpeg">第四次启动1</p><p>键盘选择ABC英文键盘或者简体中文都行。</p><p><img alt="第四次启动2" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb316139403d.jpeg" data-src="https://i.loli.net/2019/04/14/5cb316139403d.jpeg">第四次启动2</p><p>由于我实际上加入了WIFI驱动，所以是可以上网的</p><p><img alt="第四次启动3" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb31612117cb.jpeg" data-src="https://i.loli.net/2019/04/14/5cb31612117cb.jpeg">第四次启动3</p><p>如果是没有加入WIFI驱动并且没有网线连接有线网口是，出现的画面应该是这样的，我们需要选择“我的电脑不连接互联网”</p><p><img alt="第四次启动4" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb3161bd7cee.jpeg" data-src="https://i.loli.net/2019/04/14/5cb3161bd7cee.jpeg">第四次启动4</p><p>数据与隐私没啥好说的，继续</p><p><img alt="第四次启动5" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb3161db7684.jpeg" data-src="https://i.loli.net/2019/04/14/5cb3161db7684.jpeg">第四次启动5</p><p>不传输任何信息，继续</p><p><img alt="第四次启动6" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb316f7c6ca3.jpeg" data-src="https://i.loli.net/2019/04/14/5cb316f7c6ca3.jpeg">第四次启动6</p><p>在登录Apple ID界面，个人建议无论你是否能上网，都选择稍后设置，因为很多朋友连SMBIOS的三码都没搞懂，贸然登录Apple ID是可能被锁账户的，到时候你哭都来不及。</p><p><img alt="第四次启动7" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb316f48cf97.jpeg" data-src="https://i.loli.net/2019/04/14/5cb316f48cf97.jpeg">第四次启动7</p><p>条款与条件没啥好说的，继续</p><p><img alt="第四次启动8" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb316f980404.jpeg" data-src="https://i.loli.net/2019/04/14/5cb316f980404.jpeg">第四次启动8</p><p>接下来创建本地账户，各位可自行设置</p><p><img alt="第四次启动9" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb316f6327e0.jpeg" data-src="https://i.loli.net/2019/04/14/5cb316f6327e0.jpeg">第四次启动9</p><p>快捷设置选择自定设置</p><p><img alt="第四次启动10" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb316f307d0f.jpeg" data-src="https://i.loli.net/2019/04/14/5cb316f307d0f.jpeg">第四次启动10</p><p>我们需要打开定位服务</p><p><img alt="第四次启动11" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb316ee08915.jpeg" data-src="https://i.loli.net/2019/04/14/5cb316ee08915.jpeg">第四次启动11</p><p>关闭数据共享</p><p><img alt="第四次启动12" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb316f157858.jpeg" data-src="https://i.loli.net/2019/04/14/5cb316f157858.jpeg">第四次启动12</p><p>都上Mojave了，当然要选择更好看的Dark外观了。</p><p><img alt="第四次启动13" class="post-img b-lazy" href="https://i.loli.net/2019/04/14/5cb316ec70565.jpeg" data-src="https://i.loli.net/2019/04/14/5cb316ec70565.jpeg">第四次启动13</p><p>安装结束，一个完整的macOS系统就装完了。</p><p>至此，我们就获得了一个运行于非Apple硬件上macOS 10.14 Mojave系统，当然它还有很多地方没有完善，关于驱动完善部分，我们将会在接下来的文章中继续介绍，敬请期待。<img alt="在Intel电脑上安装macOS 10.14 Mojave" class="post-img b-lazy" href="https://res.smzdm.com/images/emotions/36.png" data-src="https://res.smzdm.com/images/emotions/36.png"> （最近连折腾电脑带黑果，累坏了）</p><p>千万别把U盘扔了，下次我们进去macOS还得靠它呢。</p><h2 id="有关Windows-macOS双系统时间不同步问题"><a href="#有关Windows-macOS双系统时间不同步问题" class="headerlink" title="有关Windows macOS双系统时间不同步问题"></a>有关Windows macOS双系统时间不同步问题</h2><p>任何安装在计算机上的系统，其时间都是储存于BIOS中，Windows 10会把BIOS的时间当成本地时间，例如，现在东八区晚上八点，那么在BIOS中储存的也是8:00pm，但是Linux和macOS则会把BIOS中的时间当成UTC时间，即零时区的时间，故macOS在读到BIOS中为8:00pm，就会根据你所在的地点，例如中国，加上八个小时，所以如果macOS下没有进行时间同步，你看到的时间将会是4:00am。</p><p>解决方法有两个：</p><ol><li>在Windows下打开cmd，输入 <code>Reg add HKLMSYSTEMCurrentControlSetControlTimeZoneInformation /v RealTimeIsUniversal /t REG_DWORD /d 1</code> ，Windows就会跟Linux和macOS一样，把BIOS时间作为UTC时间，个人比较喜欢这种，这样在装三系统的时候就只要修改一个系统的设置即可。</li><li>在macOS下安装一个叫Localtime-Toggle的补丁，可以让macOS将BIOS时间当做本地时间。</li></ol></div></section></article></div><div style="height:4vw;width:100%"></div><nav id="gobottom" class="pagination"> <span class="prev-next-post">•</span> <a class="next-post" title="基于Travis的Hexo自动部署" href="/2019/03/19/基于Travis的Hexo自动部署.html">基于Travis的Hexo自动部署 →</a></nav><div class="inner"><div id="comment"></div></div></main><div class="toc-bar"><div class="toc-btn-bar"> <a href="#site-main" class="toc-btn"><svg viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M793.024 710.272a32 32 0 1 0 45.952-44.544l-310.304-320a32 32 0 0 0-46.4.48l-297.696 320a32 32 0 0 0 46.848 43.584l274.752-295.328 286.848 295.808z"/></svg></a><div class="toc-btn toc-switch"><svg class="toc-open" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M779.776 480h-387.2a32 32 0 0 0 0 64h387.2a32 32 0 0 0 0-64M779.776 672h-387.2a32 32 0 0 0 0 64h387.2a32 32 0 0 0 0-64M256 288a32 32 0 1 0 0 64 32 32 0 0 0 0-64M392.576 352h387.2a32 32 0 0 0 0-64h-387.2a32 32 0 0 0 0 64M256 480a32 32 0 1 0 0 64 32 32 0 0 0 0-64M256 672a32 32 0 1 0 0 64 32 32 0 0 0 0-64"/></svg><svg class="toc-close hide" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 960c-247.039484 0-448-200.960516-448-448S264.960516 64 512 64 960 264.960516 960 512 759.039484 960 512 960zM512 128.287273c-211.584464 0-383.712727 172.128262-383.712727 383.712727 0 211.551781 172.128262 383.712727 383.712727 383.712727 211.551781 0 383.712727-172.159226 383.712727-383.712727C895.712727 300.415536 723.551781 128.287273 512 128.287273z"/><path d="M557.05545 513.376159l138.367639-136.864185c12.576374-12.416396 12.672705-32.671738.25631-45.248112s-32.704421-12.672705-45.248112-.25631l-138.560301 137.024163-136.447897-136.864185c-12.512727-12.512727-32.735385-12.576374-45.248112-.063647-12.512727 12.480043-12.54369 32.735385-.063647 45.248112l136.255235 136.671523-137.376804 135.904314c-12.576374 12.447359-12.672705 32.671738-.25631 45.248112 6.271845 6.335493 14.496116 9.504099 22.751351 9.504099 8.12794 0 16.25588-3.103239 22.496761-9.247789l137.567746-136.064292 138.687596 139.136568c6.240882 6.271845 14.432469 9.407768 22.65674 9.407768 8.191587 0 16.352211-3.135923 22.591372-9.34412 12.512727-12.480043 12.54369-32.704421.063647-45.248112L557.05545 513.376159z"/></svg></div> <a href="#gobottom" class="toc-btn"><svg viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M231.424 346.208a32 32 0 0 0-46.848 43.584l297.696 320a32 32 0 0 0 46.4.48l310.304-320a32 32 0 1 0-45.952-44.544l-286.848 295.808-274.752-295.36z"/></svg></a></div><div class="toc-main"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#黑苹果macOS-10-14-Mojave安装"><span class="toc-text">黑苹果macOS 10.14 Mojave安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#黑苹果知识获取"><span class="toc-text">黑苹果知识获取</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#前期准备"><span class="toc-text">前期准备</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#配置环境"><span class="toc-text">配置环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#本机电脑配置"><span class="toc-text">本机电脑配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#准备工具"><span class="toc-text">准备工具</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#关于硬件的兼容性问题"><span class="toc-text">关于硬件的兼容性问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#创建macOS-Install-USB-Drive"><span class="toc-text">创建macOS Install USB Drive</span></a></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#Create-Clover-EFI-and-Configuration"><span class="toc-text">Create Clover EFI and Configuration</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#设置BIOS"><span class="toc-text">设置BIOS</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#启动macOS-Mojave安装U盘"><span class="toc-text">启动macOS Mojave安装U盘</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#有关Windows-macOS双系统时间不同步问题"><span class="toc-text">有关Windows macOS双系统时间不同步问题</span></a></li></ol></li></div></div></div><aside class="read-next outer"><div class="inner"><div class="read-next-feed"><article class="read-next-card" style="background-image:url(/img/header_image.jpg)"><header class="read-next-card-header"> <small class="read-next-card-header-sitetitle">&mdash; ERDUO &mdash;</small><h3 class="read-next-card-header-title">Recent Posts</h3></header><div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg></div><div class="read-next-card-content"><ul><li> <a href="/2019/04/14/黑苹果macOS 10.14 Mojave安装.html">黑苹果macOS 10.14 Mojave安装</a></li><li> <a href="/2019/03/19/基于Travis的Hexo自动部署.html">基于Travis的Hexo自动部署</a></li><li> <a href="/2017/10/28/Mac升级Nodejs和Npm.html">Mac升级Nodejs和Npm</a></li></ul></div><footer class="read-next-card-footer"> <a href="/archives">MORE →</a></footer></article><article class="read-next-card" style="background-image:url(/img/header_image.jpg)"><header class="read-next-card-header" style="padding-bottom:20px"><h3 class="read-next-card-header-title">Categories</h3></header><div class="read-next-card-content"><ul><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/工具资源/">工具资源</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术向/">技术向</a></li></ul></ul></div></article><article class="read-next-card" style="background-image:url(/img/header_image.jpg)"><header class="read-next-card-header" style="padding-bottom:20px"><h3 class="read-next-card-header-title">Tag Cloud</h3></header><div class="read-next-card-content-ext"> <a href="/tags/Git/" style="font-size:14px">Git</a> <a href="/tags/Hexo/" style="font-size:20.67px">Hexo</a> <a href="/tags/Mac/" style="font-size:14px">Mac</a> <a href="/tags/PS插件/" style="font-size:14px">PS插件</a> <a href="/tags/Sublime/" style="font-size:14px">Sublime</a> <a href="/tags/Travis/" style="font-size:14px">Travis</a> <a href="/tags/博客/" style="font-size:17.33px">博客</a> <a href="/tags/笔记/" style="font-size:24px">笔记</a> <a href="/tags/转载/" style="font-size:17.33px">转载</a> <a href="/tags/黑苹果/" style="font-size:14px">黑苹果</a></div></article></div></div></aside><div id="search" class="search-overlay subscribe-overlay"><div class="search-form"> <img class="search-overlay-logo" src="/img/favicon.png" alt="ERDUO"> <input id="local-search-input" class="search-input" type="text" name="search" placeholder="Search ..."><a class="search-overlay-close" href="#"></a></div><div id="local-search-result"></div></div><footer class="site-footer outer"><div class="site-footer-content inner"><section class="copyright"> <a href="/" title="ERDUO">ERDUO</a> &copy; 2020</section><nav class="site-footer-nav"> <a href="https://hexo.io" title="Hexo" target="_blank" rel="noopener">Hexo</a> <a href="https://github.com/xzhih/hexo-theme-casper" title="Casper" target="_blank" rel="noopener">Casper</a></nav></div></footer><script>
    if(window.navigator && navigator.serviceWorker) {
        navigator.serviceWorker.getRegistrations()
        .then(function(registrations) {
            for(let registration of registrations) {
                registration.unregister();
            }
        });
    }
</script><div class="floating-header"><div class="floating-header-logo"> <a href="/" title="ERDUO"><img src="/img/favicon.png" alt="ERDUO icon"> <span>ERDUO</span></a></div> <span class="floating-header-divider">&mdash;</span><div class="floating-header-title">黑苹果macOS 10.14 Mojave安装</div><progress class="progress" value="0"><div class="progress-container"><span class="progress-bar"></span></div></progress></div><script src="/js/mix/post-lazy-local.min.js"></script><script>new Blazy</script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({el:"#comment",verify:!1,notify:!0,appId:"qWQihxNIh5muNnpBt4LJCQS8-gzGzoHsz",appKey:"KPUBzr5cs6M9Wkr82lq0Ksw5",placeholder:"ヾﾉ≧∀≦)o来啊，快活啊!",pageSize:10,avatar:"mm",visitor:!0})</script><script src="/js/viewer.min.js"></script><link rel="stylesheet" href="/css/viewer.min.css"><script type="text/javascript">
	//默认设置， 可以根据个人需求和喜好进行配置
	//详细参考官方说明
	Viewer.setDefaults({
		//设置初始缩放 default: 1
		zoomRatio : [0.5],
		//设置滚轮缩放比率 default: 0.1
		show: function () {
			this.viewer.zoomTo(0.5);
		},
		});
	//获得content中所有的图片， 不同主题可能有所不同
	//为了和其他的图片区别开来 所以在markdown中插入图片的时候使用独特的记号
	//为了一次性得到所有的图片我这里采用的是class = 'post-img'
	var article = document.querySelector('.markdown-body');
	var imageList = article.getElementsByClassName('post-img');
	//将获取到的HTMLCollections转化成Array
	var imageArray = new Array();
	Array.prototype.forEach.call(imageList, element => {
		imageArray.push(element);
	});
	//设置每个图片成为图片组
	Array.prototype.forEach.call(imageList, element => {
		var viewer1 = new Viewer(element);
		viewer1.images = imageArray;
		viewer1.length = imageArray.length;
	});
	</script><script>searchFunc("/")</script></body></html>